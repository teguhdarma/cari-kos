"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getPosterSrc;

var _generateJwt = _interopRequireDefault(require("./generateJwt"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* eslint-disable camelcase */
function getPosterSrc(playbackId) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var _options$width = options.width,
      width = _options$width === void 0 ? 640 : _options$width,
      _options$height = options.height,
      height = _options$height === void 0 ? null : _options$height,
      _options$time = options.time,
      time = _options$time === void 0 ? 1 : _options$time,
      _options$fit_mode = options.fit_mode,
      fit_mode = _options$fit_mode === void 0 ? 'preserve' : _options$fit_mode,
      _options$isSigned = options.isSigned,
      isSigned = _options$isSigned === void 0 ? false : _options$isSigned;
  var params = {
    width,
    time,
    fit_mode
  };

  if (options.height) {
    params.height = height.toString();
  }

  var qs;

  if (isSigned && options.signingKeyId && options.signingKeyPrivate) {
    var token = (0, _generateJwt.default)(playbackId, options.signingKeyId, options.signingKeyPrivate, 't', params);
    qs = "token=".concat(token);
  } else {
    qs = Object.keys(params).map(key => "".concat(key, "=").concat(params[key])).join('&');
  }

  return "https://image.mux.com/".concat(playbackId, "/thumbnail.png?").concat(qs);
}
//# sourceMappingURL=getPosterSrc.js.map